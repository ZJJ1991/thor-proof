"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const XHR2 = require("xhr2");
const utils = require("./utils");
/* tslint:disable:no-empty */
const noop = () => { };
let ThorAPIMapping;
exports.ThorAPIMapping = ThorAPIMapping;
exports.ThorAPIMapping = ThorAPIMapping = {
    eth_getBlockByNumber: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/blocks/" + utils.formatBlockNumber(payload.params[0]), true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => v,
            };
        },
    },
    eth_getBlockByHash: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/blocks/" + utils.formatBlockNumber(payload.params[0]), true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => v,
            };
        },
    },
    eth_blockNumber: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/blocks/best", true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => !v ? v : v.number,
            };
        },
    },
    eth_getBalance: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/accounts/" + payload.params[0] + "?revision=" + utils.formatBlockNumber(payload.params[1]), true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => !v ? v : v.balance,
            };
        },
    },
    eth_getEnergy: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/accounts/" + payload.params[0] + "?revision=" + utils.formatBlockNumber(payload.params[1]), true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => !v ? v : v.energy,
            };
        },
    },
    eth_getCode: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/accounts/" + payload.params[0] + "/code?revision=" + utils.formatBlockNumber(payload.params[1]), true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => !v ? v : v.code,
            };
        },
    },
    eth_getStorageAt: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/accounts/" + payload.params[0] + "/storage/" + payload.params[1] + "?revision=" + utils.formatBlockNumber(payload.params[2]), true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => !v ? v : v.value,
            };
        },
    },
    eth_sendRawTransaction: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("POST", host + "/transactions", true);
            return {
                Method: "POST",
                Body: {
                    raw: payload.params[0],
                },
                Request: request,
                ResFormatter: (v) => !v ? v : v.id,
            };
        },
    },
    eth_getTransactionByHash: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/transactions/" + payload.params[0], true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => {
                    if (!v) {
                        return v;
                    }
                    v.blockNumber = v.block.number;
                    return v;
                },
            };
        },
    },
    eth_getTransactionReceipt: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/transactions/" + payload.params[0] + "/receipt", true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => {
                    if (!v) {
                        return v;
                    }
                    v.blockNumber = v.block.number;
                    v.blockHash = v.block.id;
                    v.transactionHash = v.tx.id;
                    // For compatible with ethereum's receipt
                    if (v.reverted) {
                        v.status = "0x0";
                    }
                    else {
                        v.status = "0x1";
                    }
                    if (v.outputs.length === 1) {
                        v.contractAddress = v.outputs[0].contractAddress;
                    }
                    return v;
                },
            };
        },
    },
    eth_call: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            let extraURI = "";
            if (payload.params[0].to) {
                extraURI = "/" + payload.params[0].to + "?revision=" + utils.formatBlockNumber(payload.params[1]);
            }
            request.open("POST", host + "/accounts" + extraURI, true);
            const body = {
                value: payload.params[0].value || "",
                data: payload.params[0].data || "0x",
                gasPrice: payload.params[0].gasPrice || "",
            };
            if (payload.params[0].gas) {
                if (typeof payload.params[0].gas === "number") {
                    body.gas = payload.params[0].gas;
                }
                else {
                    body.gas = parseInt(utils.sanitizeHex(payload.params[0].gas), 16);
                }
            }
            if (payload.params[0].from) {
                body.caller = payload.params[0].from;
            }
            return {
                Method: "POST",
                Body: body,
                Request: request,
                ResFormatter: (v) => {
                    if (!v) {
                        return v;
                    }
                    else {
                        if (v.reverted) {
                            return null;
                        }
                        else {
                            return v.data;
                        }
                    }
                },
            };
        },
    },
    eth_estimateGas: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            let extraURI = "";
            if (payload.params[0].to) {
                extraURI = "/" + payload.params[0].to + "?revision=" + utils.formatBlockNumber(payload.params[1]);
            }
            request.open("POST", host + "/accounts" + extraURI, true);
            const body = {
                value: payload.params[0].value || "0",
                data: payload.params[0].data || "0x",
                gasPrice: payload.params[0].gasPrice || "",
            };
            if (payload.params[0].from) {
                body.caller = payload.params[0].from;
            }
            return {
                Method: "POST",
                Body: body,
                Request: request,
                ResFormatter: (v) => {
                    if (!v) {
                        return v;
                    }
                    else {
                        if (v.reverted) {
                            return null;
                        }
                        // ignore the overflow since block gas limit is uint64 and java script's max number is 2^53
                        const intrinsicGas = utils.calcIntrinsicGas(Object.assign(body, { to: payload.params[0].to }));
                        const txGas = intrinsicGas + v.gasUsed;
                        if (v.gasUsed === 0 && (body.data === "0x" || !body.data)) {
                            return intrinsicGas;
                        }
                        else {
                            return Math.floor(txGas * 1.1); // increase gas with 10% for safe since it's estimated from current block state, final state for the transaction is not determined for now
                        }
                    }
                },
            };
        },
    },
    eth_getLogs: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            let query = "";
            if (payload.params[0].address) {
                query = "&address=" + payload.params[0].address;
            }
            if (payload.params[0].order && (payload.params[0].order.toUpperCase() === "ASC" || payload.params[0].order.toUpperCase() === "DESC")) {
                query += "&order=" + payload.params[0].order.toUpperCase();
            }
            query = query.replace("&", "?");
            const body = utils.formatLogQuery(payload.params[0]);
            request.open("POST", host + "/events" + query, true);
            return {
                Method: "POST",
                Body: body,
                Request: request,
                ResFormatter: (v) => {
                    if (!v) {
                        return v;
                    }
                    for (const item of v) {
                        item.blockNumber = item.block.number;
                        item.blockHash = item.block.id;
                        item.transactionHash = item.tx.id;
                    }
                    return v;
                },
            };
        },
    },
    eth_getBlockRef: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/blocks/best", true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => {
                    if (!v) {
                        return null;
                    }
                    else if (v.id) {
                        return v.id.substr(0, 18);
                    }
                    else {
                        return null;
                    }
                },
            };
        },
    },
    eth_getChainTag: {
        formatXHR(payload, host, timeout) {
            const request = new XHR2();
            request.timeout = timeout;
            request.open("GET", host + "/blocks/0", true);
            return {
                Method: "GET",
                Body: {},
                Request: request,
                ResFormatter: (v) => {
                    if (!v) {
                        return null;
                    }
                    else if (v.id && v.id.length === 66) {
                        return "0x" + v.id.substr(64, 2);
                    }
                    else {
                        return null;
                    }
                },
            };
        },
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhvci1pbnRlcmNlcHRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy90aG9yLWludGVyY2VwdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7QUFDYixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsaUNBQWlDO0FBZWpDLDZCQUE2QjtBQUM3QixNQUFNLElBQUksR0FBRyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFFdkIsSUFBSSxjQUFtRCxDQUFDO0FBbVV0RCx3Q0FBYztBQWpVaEIseUJBQUEsY0FBYyxHQUFHO0lBQ2Ysb0JBQW9CLEVBQUU7UUFDcEIsU0FBUyxDQUFDLE9BQVksRUFBRSxJQUFZLEVBQUUsT0FBZTtZQUNuRCxNQUFNLE9BQU8sR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1lBQzNCLE9BQU8sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1lBQzFCLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksR0FBRyxVQUFVLEdBQUcsS0FBSyxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMxRixPQUFPO2dCQUNMLE1BQU0sRUFBRSxLQUFLO2dCQUNiLElBQUksRUFBRSxFQUFFO2dCQUNSLE9BQU8sRUFBRSxPQUFPO2dCQUNoQixZQUFZLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDdkIsQ0FBQztRQUNKLENBQUM7S0FDRjtJQUNELGtCQUFrQixFQUFFO1FBQ2xCLFNBQVMsQ0FBQyxPQUFZLEVBQUUsSUFBWSxFQUFFLE9BQWU7WUFDbkQsTUFBTSxPQUFPLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUMzQixPQUFPLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUMxQixPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJ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